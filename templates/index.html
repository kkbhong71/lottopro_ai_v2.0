<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로또프로 AI v2.0 - 10개 고급 AI 알고리즘</title>
    <meta name="description" content="10가지 고급 AI 알고리즘으로 로또 번호를 예측하는 프리미엄 서비스">
    <meta name="keywords" content="로또, AI, 인공지능, 번호예측, 머신러닝, 딥러닝, 통계분석">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="로또프로 AI v2.0 - 10개 고급 AI 알고리즘">
    <meta property="og:description" content="빈도분석부터 신경망까지, 10가지 최첨단 AI 기술로 로또 번호를 예측합니다">
    <meta property="og:type" content="website">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="로또프로 AI">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/icon-192.png') }}">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="{{ url_for('static', filename='css/style.css') }}" as="style">
    <link rel="preload" href="{{ url_for('static', filename='js/main.js') }}" as="script">
</head>
<body>
    <div class="container">
        <!-- 시스템 상태 알림 -->
        <div id="systemStatus" class="system-status" style="display: none;">
            <div class="status-content">
                <i class="fas fa-info-circle"></i>
                <span id="statusMessage">시스템 점검 중입니다...</span>
                <button id="dismissStatus" class="dismiss-status">&times;</button>
            </div>
        </div>

        <!-- 헤더 섹션 -->
        <header class="header">
            <div class="logo">
                <h1><i class="fas fa-brain"></i> 로또프로 AI v2.0</h1>
                <p>10가지 최첨단 AI 알고리즘으로 예측하는 프리미엄 로또 번호</p>
                <!-- 시스템 건강 상태 표시 -->
                <div class="system-health">
                    <div class="health-indicator" id="healthIndicator">
                        <i class="fas fa-circle"></i>
                        <span>시스템 상태: <span id="healthStatus">확인 중</span></span>
                    </div>
                </div>
            </div>
            <div class="data-info">
                <div class="info-card">
                    <span class="info-label">총 회차</span>
                    <span class="info-value" id="totalDraws">-</span>
                </div>
                <div class="info-card">
                    <span class="info-label">최근 회차</span>
                    <span class="info-value" id="lastDraw">-</span>
                </div>
                <div class="info-card">
                    <span class="info-label">AI 알고리즘</span>
                    <span class="info-value">10개</span>
                </div>
                <div class="info-card">
                    <span class="info-label">다음 추첨</span>
                    <span class="info-value" id="nextDraw">-</span>
                </div>
            </div>
        </header>

        <!-- 최근 당첨번호 표시 섹션 -->
        <div class="recent-winning-numbers">
            <div class="recent-header">
                <h3><i class="fas fa-trophy"></i> 최근 당첨번호</h3>
                <div class="update-info">
                    <span class="update-label">데이터 업데이트:</span>
                    <span class="update-value" id="dataUpdateTime">-</span>
                </div>
            </div>
            <div class="recent-content">
                <div class="recent-round-info">
                    <span class="round-text" id="recentRoundText">-회차</span>
                    <span class="round-date" id="recentRoundDate">-</span>
                </div>
                <div class="recent-numbers-display" id="recentWinningNumbers">
                    <!-- 최근 당첨번호가 여기에 표시됩니다 -->
                </div>
                <div class="next-draw-countdown">
                    <span class="countdown-text">다음 추첨까지</span>
                    <span class="countdown-value" id="daysUntilDraw">-일</span>
                </div>
            </div>
        </div>

        <!-- 알고리즘 소개 섹션 -->
        <div class="algorithm-intro">
            <h2><i class="fas fa-robot"></i> 10가지 AI 알고리즘</h2>
            <div class="intro-grid">
                <div class="intro-category">
                    <h3><i class="fas fa-star"></i> 기본 AI 알고리즘 (5개)</h3>
                    <ul>
                        <li><strong>빈도 분석:</strong> 과거 당첨번호 출현 빈도 기반</li>
                        <li><strong>핫/콜드 분석:</strong> 최근 출현 패턴 분석</li>
                        <li><strong>패턴 분석:</strong> 번호 분포 구간별 패턴</li>
                        <li><strong>통계 분석:</strong> 수학적 통계 모델 적용</li>
                        <li><strong>머신러닝:</strong> 랜덤포레스트 기반 예측</li>
                    </ul>
                </div>
                <div class="intro-category">
                    <h3><i class="fas fa-rocket"></i> 고급 AI 알고리즘 (5개)</h3>
                    <ul>
                        <li><strong>신경망 분석:</strong> 딥러닝 패턴 학습</li>
                        <li><strong>마르코프 체인:</strong> 상태 전이 확률 모델</li>
                        <li><strong>유전자 알고리즘:</strong> 진화론적 최적화</li>
                        <li><strong>동반출현 분석:</strong> 번호 간 상관관계</li>
                        <li><strong>시계열 분석:</strong> 시간 패턴 예측</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 메인 컨트롤 (수정됨 - 백테스팅, 모니터링 버튼 제거) -->
        <div class="main-controls">
            <button id="generateBtn" class="generate-btn">
                <i class="fas fa-magic"></i>
                <span>10개 AI 알고리즘 실행</span>
            </button>
            <button id="statisticsBtn" class="stats-btn">
                <i class="fas fa-chart-bar"></i>
                <span>통계 분석</span>
            </button>
            <button id="exportBtn" class="export-btn">
                <i class="fas fa-download"></i>
                <span>결과 내보내기</span>
            </button>
        </div>

        <!-- 성능 지표 섹션 (개선됨) -->
        <div class="performance-indicators" style="display: none;" id="performanceSection">
            <h3><i class="fas fa-tachometer-alt"></i> 시스템 성능 지표</h3>
            <div class="indicators-grid">
                <div class="indicator-card">
                    <div class="indicator-value" id="processingTime">-</div>
                    <div class="indicator-label">처리 시간</div>
                </div>
                <div class="indicator-card">
                    <div class="indicator-value" id="dataPoints">-</div>
                    <div class="indicator-label">분석 데이터</div>
                </div>
                <div class="indicator-card">
                    <div class="indicator-value">10개</div>
                    <div class="indicator-label">우선 번호 세트</div>
                </div>
                <div class="indicator-card">
                    <div class="indicator-value" id="systemReliability">99.9%</div>
                    <div class="indicator-label">시스템 안정성</div>
                </div>
            </div>
        </div>

        <!-- 로딩 인디케이터 (개선됨) -->
        <div id="loadingIndicator" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p>10개 AI 알고리즘이 번호를 분석하고 있습니다...</p>
            <div class="loading-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">초기화 중...</span>
            </div>
            <!-- 알고리즘별 진행 상태 표시 -->
            <div class="algorithm-progress" id="algorithmProgress" style="display: none;">
                <div class="progress-grid">
                    <div class="progress-item" data-algorithm="1">
                        <span class="algo-name">빈도 분석</span>
                        <span class="algo-status">대기 중</span>
                    </div>
                    <div class="progress-item" data-algorithm="2">
                        <span class="algo-name">핫/콜드 분석</span>
                        <span class="algo-status">대기 중</span>
                    </div>
                    <div class="progress-item" data-algorithm="3">
                        <span class="algo-name">패턴 분석</span>
                        <span class="algo-status">대기 중</span>
                    </div>
                    <div class="progress-item" data-algorithm="4">
                        <span class="algo-name">통계 분석</span>
                        <span class="algo-status">대기 중</span>
                    </div>
                    <div class="progress-item" data-algorithm="5">
                        <span class="algo-name">머신러닝</span>
                        <span class="algo-status">대기 중</span>
                    </div>
                    <div class="progress-item" data-algorithm="6">
                        <span class="algo-name">신경망 분석</span>
                        <span class="algo-status">대기 중</span>
                    </div>
                    <div class="progress-item" data-algorithm="7">
                        <span class="algo-name">마르코프 체인</span>
                        <span class="algo-status">대기 중</span>
                    </div>
                    <div class="progress-item" data-algorithm="8">
                        <span class="algo-name">유전자 알고리즘</span>
                        <span class="algo-status">대기 중</span>
                    </div>
                    <div class="progress-item" data-algorithm="9">
                        <span class="algo-name">동반출현 분석</span>
                        <span class="algo-status">대기 중</span>
                    </div>
                    <div class="progress-item" data-algorithm="10">
                        <span class="algo-name">시계열 분석</span>
                        <span class="algo-status">대기 중</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 알고리즘별 예측 결과 -->
        <div id="predictionsContainer" class="predictions-container" style="display: none;">
            <div class="predictions-header">
                <h2><i class="fas fa-brain"></i> AI 알고리즘 예측 결과</h2>
                <div class="result-summary">
                    <span class="summary-item">
                        <i class="fas fa-check-circle"></i>
                        <span>기본 알고리즘: <span id="basicAlgoCount">5</span>개 완료</span>
                    </span>
                    <span class="summary-item">
                        <i class="fas fa-rocket"></i>
                        <span>고급 알고리즘: <span id="advancedAlgoCount">5</span>개 완료</span>
                    </span>
                    <span class="summary-item">
                        <i class="fas fa-trophy"></i>
                        <span>총 <span id="totalAlgoCount">10</span>개 우선 번호</span>
                    </span>
                </div>
            </div>
            
            <div class="algorithms-grid" id="algorithmsGrid">
                <!-- 알고리즘별 카드가 여기에 동적으로 생성됩니다 -->
            </div>
        </div>

        <!-- 통계 섹션 -->
        <div id="statisticsSection" class="statistics-section" style="display: none;">
            <h2><i class="fas fa-chart-pie"></i> 당첨번호 통계 분석</h2>
            
            <div class="stats-grid">
                <!-- 최근 당첨 정보 -->
                <div class="stat-card recent-draw">
                    <h3><i class="fas fa-calendar-alt"></i> 최근 당첨 정보</h3>
                    <div id="recentDrawInfo">
                        <div class="draw-numbers" id="recentNumbers"></div>
                        <div class="draw-details" id="recentDetails"></div>
                    </div>
                </div>

                <!-- 최고 빈도 번호 -->
                <div class="stat-card frequency-high">
                    <h3><i class="fas fa-fire"></i> 최고 빈도 번호 TOP 10</h3>
                    <div class="frequency-list" id="mostFrequent"></div>
                </div>

                <!-- 최저 빈도 번호 -->
                <div class="stat-card frequency-low">
                    <h3><i class="fas fa-snowflake"></i> 최저 빈도 번호 TOP 10</h3>
                    <div class="frequency-list" id="leastFrequent"></div>
                </div>

                <!-- 최근 핫 번호 -->
                <div class="stat-card recent-hot">
                    <h3><i class="fas fa-trending-up"></i> 최근 핫 번호 (20회차)</h3>
                    <div class="frequency-list" id="recentHot"></div>
                </div>
            </div>
        </div>

        <!-- 10개 AI 알고리즘 상세 설명 -->
        <div class="algorithm-explanations">
            <h2><i class="fas fa-brain"></i> 10개 AI 알고리즘 상세 설명</h2>
            <div class="explanation-tabs">
                <button class="tab-btn active" data-tab="basic">
                    <i class="fas fa-star"></i> 기본 AI 알고리즘 (5개)
                </button>
                <button class="tab-btn" data-tab="advanced">
                    <i class="fas fa-rocket"></i> 고급 AI 알고리즘 (5개)
                </button>
            </div>

            <!-- 기본 AI 알고리즘 설명 -->
            <div id="basic-algorithms" class="tab-content active">
                <div class="algorithms-explanation-grid">
                    <div class="algo-explanation-card frequency">
                        <div class="algo-header">
                            <div class="algo-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <div class="algo-title">
                                <h3>빈도 분석 알고리즘</h3>
                                <span class="algo-category">통계 기반</span>
                            </div>
                        </div>
                        <div class="algo-content">
                            <div class="algo-principle">
                                <h4><i class="fas fa-lightbulb"></i> 원리</h4>
                                <p>과거 모든 당첨번호의 출현 빈도를 계산하고, 자주 나온 번호가 미래에도 나올 확률이 높다는 가정하에 예측합니다.</p>
                            </div>
                            <div class="algo-advantages">
                                <h4><i class="fas fa-thumbs-up"></i> 장점</h4>
                                <p>직관적이고 이해하기 쉬우며, 장기간의 트렌드를 반영할 수 있습니다.</p>
                            </div>
                            <div class="algo-usage">
                                <h4><i class="fas fa-target"></i> 활용</h4>
                                <p>장기 트렌드 파악, 안정적인 기준선 제공</p>
                            </div>
                        </div>
                    </div>

                    <div class="algo-explanation-card hot-cold">
                        <div class="algo-header">
                            <div class="algo-icon">
                                <i class="fas fa-thermometer-half"></i>
                            </div>
                            <div class="algo-title">
                                <h3>핫/콜드 분석 알고리즘</h3>
                                <span class="algo-category">트렌드 기반</span>
                            </div>
                        </div>
                        <div class="algo-content">
                            <div class="algo-principle">
                                <h4><i class="fas fa-lightbulb"></i> 원리</h4>
                                <p>최근 20회차의 "핫" 번호(자주 나온 번호)와 오랫동안 안 나온 "콜드" 번호를 분석하여 3-4개 핫번호와 2-3개 콜드번호를 조합합니다.</p>
                            </div>
                            <div class="algo-advantages">
                                <h4><i class="fas fa-thumbs-up"></i> 장점</h4>
                                <p>최근 트렌드를 반영하고 보상 심리를 활용한 균형잡힌 접근법입니다.</p>
                            </div>
                            <div class="algo-usage">
                                <h4><i class="fas fa-target"></i> 활용</h4>
                                <p>최근 출현 패턴 기반 예측, 단기 변동성 반영</p>
                            </div>
                        </div>
                    </div>

                    <div class="algo-explanation-card pattern">
                        <div class="algo-header">
                            <div class="algo-icon">
                                <i class="fas fa-puzzle-piece"></i>
                            </div>
                            <div class="algo-title">
                                <h3>패턴 분석 알고리즘</h3>
                                <span class="algo-category">분포 기반</span>
                            </div>
                        </div>
                        <div class="algo-content">
                            <div class="algo-principle">
                                <h4><i class="fas fa-lightbulb"></i> 원리</h4>
                                <p>번호를 5개 구간(1-10, 11-20, ...)으로 분할하고 각 구간별 출현 비율을 계산하여 균등한 분포를 목표로 번호를 선택합니다.</p>
                            </div>
                            <div class="algo-advantages">
                                <h4><i class="fas fa-thumbs-up"></i> 장점</h4>
                                <p>극단적인 조합을 방지하고 번호 분포의 균형성을 추구합니다.</p>
                            </div>
                            <div class="algo-usage">
                                <h4><i class="fas fa-target"></i> 활용</h4>
                                <p>안정적인 분포 패턴, 균형잡힌 번호 조합</p>
                            </div>
                        </div>
                    </div>

                    <div class="algo-explanation-card statistical">
                        <div class="algo-header">
                            <div class="algo-icon">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <div class="algo-title">
                                <h3>통계 분석 알고리즘</h3>
                                <span class="algo-category">수학 기반</span>
                            </div>
                        </div>
                        <div class="algo-content">
                            <div class="algo-principle">
                                <h4><i class="fas fa-lightbulb"></i> 원리</h4>
                                <p>각 자리별 평균과 표준편차를 계산하고 정규분포를 가정하여 통계적 모델 기반으로 번호를 생성합니다.</p>
                            </div>
                            <div class="algo-advantages">
                                <h4><i class="fas fa-thumbs-up"></i> 장점</h4>
                                <p>수학적 통계 이론에 기반한 과학적 접근법으로 신뢰성이 높습니다.</p>
                            </div>
                            <div class="algo-usage">
                                <h4><i class="fas fa-target"></i> 활용</h4>
                                <p>확률론적 예측, 수학적 모델링</p>
                            </div>
                        </div>
                    </div>

                    <div class="algo-explanation-card machine-learning">
                        <div class="algo-header">
                            <div class="algo-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="algo-title">
                                <h3>머신러닝 알고리즘</h3>
                                <span class="algo-category">AI 기반</span>
                            </div>
                        </div>
                        <div class="algo-content">
                            <div class="algo-principle">
                                <h4><i class="fas fa-lightbulb"></i> 원리</h4>
                                <p>과거 10회차 데이터를 특성으로 사용하여 랜덤포레스트 모델을 학습시키고 각 자리별 예측값을 생성합니다.</p>
                            </div>
                            <div class="algo-advantages">
                                <h4><i class="fas fa-thumbs-up"></i> 장점</h4>
                                <p>앙상블 학습으로 복잡한 패턴을 인식하고 과적합을 방지합니다.</p>
                            </div>
                            <div class="algo-usage">
                                <h4><i class="fas fa-target"></i> 활용</h4>
                                <p>다차원 패턴 분석, 비선형 관계 모델링</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 고급 AI 알고리즘 설명 -->
            <div id="advanced-algorithms" class="tab-content">
                <div class="algorithms-explanation-grid">
                    <div class="algo-explanation-card neural-network">
                        <div class="algo-header">
                            <div class="algo-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="algo-title">
                                <h3>신경망 분석 알고리즘</h3>
                                <span class="algo-category advanced">딥러닝</span>
                            </div>
                        </div>
                        <div class="algo-content">
                            <div class="algo-principle">
                                <h4><i class="fas fa-lightbulb"></i> 원리</h4>
                                <p>다층 퍼셉트론(MLP) 신경망을 구축하여 100-50-25 노드 구조로 딥러닝 기반 패턴을 학습합니다.</p>
                            </div>
                            <div class="algo-advantages">
                                <h4><i class="fas fa-thumbs-up"></i> 장점</h4>
                                <p>인공 신경망의 비선형 패턴 학습으로 복잡한 상관관계를 발견할 수 있습니다.</p>
                            </div>
                            <div class="algo-usage">
                                <h4><i class="fas fa-target"></i> 활용</h4>
                                <p>딥러닝 기반 고급 예측, 복합 패턴 인식</p>
                            </div>
                        </div>
                    </div>

                    <div class="algo-explanation-card markov-chain">
                        <div class="algo-header">
                            <div class="algo-icon">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div class="algo-title">
                                <h3>마르코프 체인 알고리즘</h3>
                                <span class="algo-category advanced">확률 모델</span>
                            </div>
                        </div>
                        <div class="algo-content">
                            <div class="algo-principle">
                                <h4><i class="fas fa-lightbulb"></i> 원리</h4>
                                <p>상태 전이 매트릭스를 구축하고 현재 상태에서 다음 상태로의 확률을 계산하여 확률적 체인 반응으로 번호를 생성합니다.</p>
                            </div>
                            <div class="algo-advantages">
                                <h4><i class="fas fa-thumbs-up"></i> 장점</h4>
                                <p>현재 상태가 다음 상태에 영향을 준다는 이론으로 순차적 패턴을 모델링합니다.</p>
                            </div>
                            <div class="algo-usage">
                                <h4><i class="fas fa-target"></i> 활용</h4>
                                <p>연속성 있는 예측, 상태 전이 분석</p>
                            </div>
                        </div>
                    </div>

                    <div class="algo-explanation-card genetic">
                        <div class="algo-header">
                            <div class="algo-icon">
                                <i class="fas fa-dna"></i>
                            </div>
                            <div class="algo-title">
                                <h3>유전자 알고리즘</h3>
                                <span class="algo-category advanced">진화 계산</span>
                            </div>
                        </div>
                        <div class="algo-content">
                            <div class="algo-principle">
                                <h4><i class="fas fa-lightbulb"></i> 원리</h4>
                                <p>초기 개체군(50개)을 생성하고 적합도 함수로 평가한 후, 교배, 변이, 선택 과정을 30세대 반복합니다.</p>
                            </div>
                            <div class="algo-advantages">
                                <h4><i class="fas fa-thumbs-up"></i> 장점</h4>
                                <p>생물학적 진화 과정을 모방하여 전역 최적해를 탐색할 수 있습니다.</p>
                            </div>
                            <div class="algo-usage">
                                <h4><i class="fas fa-target"></i> 활용</h4>
                                <p>최적화 문제 해결, 진화적 탐색</p>
                            </div>
                        </div>
                    </div>

                    <div class="algo-explanation-card co-occurrence">
                        <div class="algo-header">
                            <div class="algo-icon">
                                <i class="fas fa-link"></i>
                            </div>
                            <div class="algo-title">
                                <h3>동반출현 분석 알고리즘</h3>
                                <span class="algo-category advanced">관계 분석</span>
                            </div>
                        </div>
                        <div class="algo-content">
                            <div class="algo-principle">
                                <h4><i class="fas fa-lightbulb"></i> 원리</h4>
                                <p>번호 간 동반출현 빈도를 계산하고 상관관계가 높은 번호 쌍을 식별하여 네트워크 기반으로 번호를 선택합니다.</p>
                            </div>
                            <div class="algo-advantages">
                                <h4><i class="fas fa-thumbs-up"></i> 장점</h4>
                                <p>번호 간 숨겨진 연관성을 발견하고 상관관계를 활용한 예측이 가능합니다.</p>
                            </div>
                            <div class="algo-usage">
                                <h4><i class="fas fa-target"></i> 활용</h4>
                                <p>관계 기반 예측, 연관성 분석</p>
                            </div>
                        </div>
                    </div>

                    <div class="algo-explanation-card time-series">
                        <div class="algo-header">
                            <div class="algo-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="algo-title">
                                <h3>시계열 분석 알고리즘</h3>
                                <span class="algo-category advanced">시간 모델</span>
                            </div>
                        </div>
                        <div class="algo-content">
                            <div class="algo-principle">
                                <h4><i class="fas fa-lightbulb"></i> 원리</h4>
                                <p>각 번호의 출현 간격을 분석하고 시간 패턴을 모델링하여 다음 출현 시점을 예측합니다.</p>
                            </div>
                            <div class="algo-advantages">
                                <h4><i class="fas fa-thumbs-up"></i> 장점</h4>
                                <p>시간적 패턴과 주기성을 분석하여 시간 차원을 고려한 예측이 가능합니다.</p>
                            </div>
                            <div class="algo-usage">
                                <h4><i class="fas fa-target"></i> 활용</h4>
                                <p>주기적 패턴 예측, 시간 기반 분석</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI 알고리즘 상세 정보 -->
        <div class="algorithm-details">
            <h2><i class="fas fa-info-circle"></i> 기술 정보</h2>
            <div class="details-grid">
                <div class="detail-card">
                    <h3><i class="fas fa-cogs"></i> 기술 스택</h3>
                    <ul>
                        <li>Python Flask 백엔드</li>
                        <li>Scikit-learn 머신러닝</li>
                        <li>TensorFlow/Keras 딥러닝</li>
                        <li>NumPy/Pandas 데이터 분석</li>
                        <li>JavaScript ES6+ 프론트엔드</li>
                    </ul>
                </div>
                <div class="detail-card">
                    <h3><i class="fas fa-shield-alt"></i> 데이터 보안</h3>
                    <ul>
                        <li>HTTPS 암호화 통신</li>
                        <li>클라이언트 사이드 처리</li>
                        <li>개인정보 수집 없음</li>
                        <li>로컬 스토리지 활용</li>
                        <li>실시간 데이터 분석</li>
                    </ul>
                </div>
                <div class="detail-card">
                    <h3><i class="fas fa-clock"></i> 업데이트 주기</h3>
                    <ul>
                        <li>매주 당첨번호 업데이트</li>
                        <li>월 1회 알고리즘 최적화</li>
                        <li>분기별 신기능 추가</li>
                        <li>실시간 성능 모니터링</li>
                        <li>24/7 서비스 운영</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 푸터 -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>로또프로 AI v2.0</h4>
                    <p>최첨단 인공지능 기술로 로또 번호를 예측하는 프리미엄 서비스</p>
                </div>
                <div class="footer-section">
                    <h4>면책조항</h4>
                    <p>본 서비스는 오락 및 연구 목적으로 제공됩니다. 당첨을 보장하지 않으며, 책임감 있는 게임을 권장합니다.</p>
                </div>
                <div class="footer-section">
                    <h4>기술 지원</h4>
                    <p>&copy; 2025 로또프로 AI. 모든 권리 보유.</p>
                    <p>Powered by Advanced AI KGB Technology</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- 모달 - 번호 세트 상세보기 (개선됨) -->
    <div id="numbersModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">AI 예측 번호 상세</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <!-- 알고리즘 배지 및 메타 정보 -->
                <div class="modal-info">
                    <span id="modalAlgorithmBadge" class="algorithm-badge-modal basic">CLASSIC</span>
                    <span id="modalConfidence" class="confidence-score">
                        <i class="fas fa-star"></i>
                        <span>신뢰도: 높음 (85%)</span>
                    </span>
                </div>
                
                <div class="modal-numbers" id="modalNumbers">
                    <!-- JavaScript로 생성 -->
                </div>
                
                <div class="modal-stats">
                    <div class="stat-item">
                        <span class="stat-label">예상 적중률:</span>
                        <span class="stat-value" id="modalHitRate">7.2%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">알고리즘 타입:</span>
                        <span class="stat-value" id="modalAlgoType">기본 AI 알고리즘</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">분석 데이터:</span>
                        <span class="stat-value" id="modalDataSize">1,191회차</span>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button id="copyNumbers" class="copy-btn">
                        <i class="fas fa-copy"></i> 복사
                    </button>
                    <button id="saveNumbers" class="save-btn">
                        <i class="fas fa-save"></i> 저장
                    </button>
                    <button id="analyzeNumbers" class="analyze-btn">
                        <i class="fas fa-search"></i> 분석
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 상세 분석 모달 -->
    <div id="analysisModal" class="modal">
        <div class="modal-content analysis-modal">
            <div class="modal-header">
                <h3><i class="fas fa-microscope"></i> 번호 상세 분석</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="analysis-content" id="analysisContent">
                    <!-- 분석 내용이 여기에 동적으로 생성됩니다 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 내보내기 모달 (새로 추가) -->
    <div id="exportModal" class="modal">
        <div class="modal-content export-modal">
            <div class="modal-header">
                <h3><i class="fas fa-download"></i> 예측 결과 내보내기</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="export-options">
                    <h4>내보내기 형식을 선택하세요:</h4>
                    <div class="format-options">
                        <button class="format-btn" data-format="json">
                            <i class="fas fa-code"></i>
                            <span>JSON 형식</span>
                            <small>개발자용 구조화된 데이터</small>
                        </button>
                        <button class="format-btn" data-format="csv">
                            <i class="fas fa-table"></i>
                            <span>CSV 형식</span>
                            <small>엑셀에서 열 수 있는 표</small>
                        </button>
                        <button class="format-btn" data-format="txt">
                            <i class="fas fa-file-alt"></i>
                            <span>텍스트 형식</span>
                            <small>읽기 쉬운 텍스트</small>
                        </button>
                    </div>
                </div>
                <div class="export-actions">
                    <button id="executeExport" class="export-execute-btn" disabled>
                        <i class="fas fa-download"></i> 내보내기 실행
                    </button>
                    <button id="cancelExport" class="export-cancel-btn">
                        취소
                    </button>
                </div>
                <div id="exportStatus" class="export-status" style="display: none;">
                    <!-- 내보내기 상태 표시 -->
                </div>
            </div>
        </div>
    </div>

    <!-- PWA 설치 배너 -->
    <div id="installBanner" class="install-banner" style="display: none;">
        <div class="banner-content">
            <i class="fas fa-mobile-alt"></i>
            <span>앱으로 설치하여 더 빠르게 이용하세요!</span>
            <button id="installBtn" class="install-btn">
                <i class="fas fa-download"></i> 설치
            </button>
            <button id="dismissBtn" class="dismiss-btn">&times;</button>
        </div>
    </div>

    <!-- 시스템 알림 컨테이너 -->
    <div class="system-notifications" id="systemNotifications">
        <!-- 동적으로 생성되는 알림들 -->
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    
    <!-- Analytics and PWA -->
    <script>
        // PWA 설치 지원
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBanner').style.display = 'flex';
        });
        
        document.getElementById('installBtn').addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                deferredPrompt = null;
                document.getElementById('installBanner').style.display = 'none';
            }
        });
        
        document.getElementById('dismissBtn').addEventListener('click', () => {
            document.getElementById('installBanner').style.display = 'none';
        });
        
        // 성능 모니터링
        window.addEventListener('load', () => {
            if (window.performance && window.performance.timing) {
                const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
                
                if (loadTime > 0 && loadTime < 60000) {
                    console.log(`페이지 로드 시간: ${loadTime}ms`);
                    
                    if (window.lottoApp && window.lottoApp.trackUserActivity) {
                        window.lottoApp.trackUserActivity('page_load_complete', {
                            loadTime: loadTime,
                            timestamp: Date.now()
                        });
                    }
                } else {
                    console.log('페이지 로드 시간 측정 오류 또는 비정상적인 값');
                }
            }
        });

        // 시스템 상태 알림 관리
        document.getElementById('dismissStatus')?.addEventListener('click', () => {
            document.getElementById('systemStatus').style.display = 'none';
        });

        // 에러 모니터링
        window.addEventListener('error', (e) => {
            console.error('JavaScript 에러:', e.error);
            if (window.lottoApp && window.lottoApp.trackUserActivity) {
                window.lottoApp.trackUserActivity('javascript_error', {
                    message: e.message,
                    filename: e.filename,
                    lineno: e.lineno,
                    colno: e.colno
                });
            }
        });

        window.addEventListener('unhandledrejection', function(event) {
            console.warn('Unhandled promise rejection:', event.reason);
            event.preventDefault();
            
            if (window.lottoApp && window.lottoApp.trackUserActivity) {
                window.lottoApp.trackUserActivity('promise_rejection', {
                    reason: event.reason?.toString() || 'Unknown',
                    timestamp: Date.now()
                });
            }
        });

        // 네트워크 상태 모니터링
        window.addEventListener('online', () => {
            if (window.lottoApp && window.lottoApp.showSuccess) {
                window.lottoApp.showSuccess('네트워크 연결이 복구되었습니다.');
            }
        });

        window.addEventListener('offline', () => {
            if (window.lottoApp && window.lottoApp.showError) {
                window.lottoApp.showError('네트워크 연결이 끊어졌습니다.');
            }
        });

        // 서비스 워커 등록
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const swResponse = await fetch('/static/js/sw.js', { 
                        method: 'HEAD',
                        cache: 'no-cache'
                    });
                    
                    if (swResponse.ok) {
                        const registration = await navigator.serviceWorker.register('/static/js/sw.js');
                        console.log('✅ Service Worker 등록 성공:', registration);
                        
                        if (window.lottoApp && window.lottoApp.trackUserActivity) {
                            window.lottoApp.trackUserActivity('sw_registration_success', {
                                scope: registration.scope,
                                timestamp: Date.now()
                            });
                        }
                    } else {
                        console.log('ℹ️ Service Worker 파일이 없습니다. 기본 브라우저 기능으로 동작합니다.');
                    }
                } catch (error) {
                    console.log('ℹ️ Service Worker 등록을 건너뜁니다. 오류:', error.message);
                    
                    if (window.location.hostname === 'localhost' && window.lottoApp && window.lottoApp.trackUserActivity) {
                        window.lottoApp.trackUserActivity('sw_registration_failed', {
                            error: error.message,
                            timestamp: Date.now()
                        });
                    }
                }
            });
        }

        // 전역 오류 핸들러
        window.onerror = function(message, source, lineno, colno, error) {
            console.error('전역 오류 핸들러:', { message, source, lineno, colno, error });
            return true;
        };
        
        // 리소스 로딩 오류 감지
        window.addEventListener('error', function(e) {
            if (e.target !== window) {
                console.warn('리소스 로딩 오류:', e.target.src || e.target.href);
            }
        }, true);
    </script>
</body>
</html>
